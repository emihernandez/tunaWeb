<div style="min-height:970px">
<section class="content-header">
    <h1>
      Adm. Usuarios
      <small>Modificar los datos de un usuario</small>
    </h1>
    <ol class="breadcrumb">
      <li><a href="#"><i class="glyphicon glyphicon-user"></i> Adm. Usuarios</a></li>
      <li class="active"><a href="#">Modificar</a></li>
    </ol>
  </section>

  <section class="content">
    <div class="row col-lg-offset-1" style="padding-top: 5px;">
       <div class="col-md-9">
        <div class="panel panel-info">
          <div class="panel-heading">
            <a ng-click="buscarIsCollapsed = !buscarIsCollapsed">
              Ingrese datos de búsqueda
            </a>
          </div>  
          <div collapse="buscarIsCollapsed">  
            <div class="panel-body">
              <form class="form-horizontal">
                <div class="form-group margin-bottom-none">
                  <div class="col-sm-9 col-lg-3">
                    <input class="form-control input-sm" placeholder="Nombre de usuario" ng-model="usuario.username">
                  </div> 
                  <div class="col-sm-3">
                    <button type="submit" class="btn btn-default" ng-click="buscarUsuario()">Buscar</button>
                  </div>                          
                </div>                        
              </form>
            </div>
          </div>

       </div>
      </div>
    </div>
    <div class="row col-lg-offset-1" style="padding-top: 5px;" ng-show="usuarioObtenido">
        <div class="col-lg-9" >
            <div class="panel panel-info">
                <div class="panel-heading">
                   Datos del usuario
              </a>
            </h4>
          </div> 
          <div class="box-body pad">

           <form name="usuarioForm" novalidate>

            <div class="row">
              <div class="col-lg-6">
                <div class="form-group">
                  <label>Nombre</label>
                  <input class="form-control" name="nombre" ng-model="usuario.nombre" required>
                  <span style="color:red" class="error" ng-if="usuarioForm.$submitted && usuarioForm.nombre.$error.required"> 
                  &nbsp;&nbsp;Este campo es obligatorio</span>
                </div>
              </div>

              <div class="col-lg-6">
                <div class="form-group">
                  <label>Apellido</label>
                  <input class="form-control" name="apellido" ng-model="usuario.apellido" required>
                  <span style="color:red" class="error" ng-if="usuarioForm.$submitted && usuarioForm.apellido.$error.required"> 
                  &nbsp;&nbsp;Este campo es obligatorio</span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <div class="form-group">
                  <label>Teléfono</label>
                  <input class="form-control" name="telefono" ng-model="usuario.telefono" required>
                  <span style="color:red" class="error" ng-if="usuarioForm.$submitted && usuarioForm.telefono.$error.required"> 
                  &nbsp;&nbsp;Este campo es obligatorio</span>
                </div>
              </div>

              <div class="col-lg-6">
                <div class="form-group">
                  <label>Correo electrónico</label>
                  <input class="form-control" name="mail" ng-model="usuario.mail" required>
                  <span style="color:red" class="error" ng-if="usuarioForm.$submitted && usuarioForm.mail.$error.required"> 
                  &nbsp;&nbsp;Este campo es obligatorio</span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <div class="form-group">
                  <label>Nombre de usuario</label>
                  <label class="form-control">{{usuario.usernameLabel}}</label>
                </div>
              </div>
            </div>


            <div class="box box-info">
              <div class="box-header">
                <h4 class="box-title">
                  <a ng-click="rolesIsCollapsed = !rolesIsCollapsed">
                      Roles
                  </a>
                </h4>
              </div>
              
              <div collapse="rolesIsCollapsed">
                <div class="panel-body">
                  <div class="row">
                    <div class="col-lg-12" >
                       <div class="form-group">
                        <div>
                          <div class="col-lg-4">
                            <div class="checkbox">
                               <label><input type="checkbox" value="" ng-init="rol.admin=false" 
                                  ng-model="rol.admin">Administrador</label>
                            </div>
                          </div>
                          <div class="col-lg-4">
                            <div class="checkbox">
                               <label><input type="checkbox" value="" ng-init="rol.auditor=false" 
                                  ng-model="rol.auditor">Auditor</label>
                            </div>
                          </div>
                          <div class="col-lg-4">
                            <div class="checkbox">
                               <label><input type="checkbox" value="" ng-init="rol.backoffice=false" 
                                  ng-model="rol.backoffice">Backoffice</label>
                            </div>
                          </div>
                          <div class="col-lg-4">
                            <div class="checkbox">
                               <label><input type="checkbox" value="" ng-init="rol.director=false" 
                                  ng-model="rol.director">Director</label>
                            </div>
                          </div>
                                                                             
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
           </div>

            <div class="row" class="col-lg-12">
              <div class="col-lg-5">
                <div class="form-group" ng-show="usuario.activo">
                  <label class="form-control">Estado de la cuenta: Activa</label>
                </div>
                <div class="form-group" ng-show="!usuario.activo">
                  <label class="form-control">Estado de la cuenta: Deshabilitada</label>
                </div>
              </div>
              <div class="col-lg-3">
                <button ng-show="usuario.activo" class="btn btn-info" type="submit" ng-click="deshabilitarUsuario()">Deshabilitar cuenta</button>
                <button ng-show="!usuario.activo" class="btn btn-info" type="submit" ng-click="activarUsuario()">Activar cuenta</button>
              </div>
              <div class="col-lg-3">
                <button class="btn btn-success" type="submit" ng-click="confirmarRestaurarContrasena()">Restaurar contraseña</button>
              </div>
            </div>
            
            <div class="row" class="col-lg-12">
              </br>
              <div class="col-lg-12">
                  <button class="btn btn-primary" type="submit" ng-click="modificarUsuario()">Guardar cambios</button>
                  <span style="color:red" class="error" ng-if="usuarioForm.$submitted && usuarioForm.nombre.$error.required || 
                                                               usuarioForm.$submitted && usuarioForm.apellido.$error.required || 
                                                               usuarioForm.$submitted && usuarioForm.telefono.$error.required || 
                                                               usuarioForm.$submitted && usuarioForm.mail.$error.required "> 
                  &nbsp;&nbsp;Por favor corrija el formulario</span>
              </div>
            </div>
        <!-- /.col-lg-12 -->
    </div>
  </section>
</div>                